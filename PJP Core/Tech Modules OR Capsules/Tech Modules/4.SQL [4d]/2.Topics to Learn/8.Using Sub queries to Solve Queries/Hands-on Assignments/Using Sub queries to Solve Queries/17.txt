WITH DEPT_PAYROLL AS (SELECT DEPTNO, SUM(SAL) "PAYROLL" FROM EMP GROUP BY DEPTNO),
DEPT_AVG AS (SELECT AVG(PAYROLL) "AVG" FROM DEPT_PAYROLL)
SELECT LOC
FROM DEPT D, DEPT_PAYROLL P, DEPT_AVG A
WHERE D.DEPTNO = P.DEPTNO AND P.PAYROLL < A.AVG;
